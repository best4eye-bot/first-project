peterpae) ubuntu@upbit-01:~/Auto$ python coin_telegram.py
ERROR:__main__:Error in getting moving average for KRW-BTC: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
ERROR:error:Error in getting moving average for KRW-BTC: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:__main__:Error in getting moving average for KRW-BTC: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
ERROR:error:Error in getting moving average for KRW-BTC: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:error:Error fetching moving averages for KRW-BTC
ERROR:error:Error fetching allocated amount for KRW-BTC
ERROR:error:Error in getting position size for KRW-BTC: get_balances() missing 1 required positional argument: 'session'
Traceback (most recent call last):
  File "coin_telegram.py", line 527, in get_position_size
    account = await get_balances()
TypeError: get_balances() missing 1 required positional argument: 'session'
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:__main__:Error in getting moving average for KRW-ETH: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
ERROR:error:Error in getting moving average for KRW-ETH: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:__main__:Error in getting moving average for KRW-ETH: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
ERROR:error:Error in getting moving average for KRW-ETH: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:error:Error fetching moving averages for KRW-ETH
ERROR:error:Error fetching allocated amount for KRW-ETH
ERROR:error:Error in getting position size for KRW-ETH: get_balances() missing 1 required positional argument: 'session'
Traceback (most recent call last):
  File "coin_telegram.py", line 527, in get_position_size
    account = await get_balances()
TypeError: get_balances() missing 1 required positional argument: 'session'
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:__main__:Error in getting moving average for KRW-DOGE: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
ERROR:error:Error in getting moving average for KRW-DOGE: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:__main__:Error in getting moving average for KRW-DOGE: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
ERROR:error:Error in getting moving average for KRW-DOGE: string indices must be integers
Traceback (most recent call last):
  File "coin_telegram.py", line 549, in get_moving_average
    close_prices = [candle['trade_price'] for candle in candles]
  File "coin_telegram.py", line 549, in <listcomp>
    close_prices = [candle['trade_price'] for candle in candles]
TypeError: string indices must be integers
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:error:Error fetching moving averages for KRW-DOGE
ERROR:error:Error fetching allocated amount for KRW-DOGE
ERROR:error:Error in getting position size for KRW-DOGE: get_balances() missing 1 required positional argument: 'session'
Traceback (most recent call last):
  File "coin_telegram.py", line 527, in get_position_size
    account = await get_balances()
TypeError: get_balances() missing 1 required positional argument: 'session'
coin_telegram.py:141: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
ERROR:error:An error occurred in main(): send_initial_notification() missing 1 required positional argument: 'bot_instances'
Traceback (most recent call last):
  File "coin_telegram.py", line 1063, in main
    await send_initial_notification(bot, session)
TypeError: send_initial_notification() missing 1 required positional argument: 'bot_instances'
coin_telegram.py:1092: DeprecationWarning: Call to deprecated function close (This method's behavior will be changed in aiogram v3.0. More info: https://core.telegram.org/bots/api#close).
  await bot.close()
Exception ignored in: <function _SelectorTransport.__del__ at 0x7fabaa3ba280>
Traceback (most recent call last):
  File "/home/ubuntu/anaconda3/envs/peterpae/lib/python3.8/asyncio/selector_events.py", line 696, in __del__
    _warn(f"unclosed transport {self!r}", ResourceWarning, source=self)
TypeError: issubclass() arg 2 must be a class or tuple of classes
Exception ignored in: <function _SelectorTransport.__del__ at 0x7fabaa3ba280>
Traceback (most recent call last):
  File "/home/ubuntu/anaconda3/envs/peterpae/lib/python3.8/asyncio/selector_events.py", line 696, in __del__
    _warn(f"unclosed transport {self!r}", ResourceWarning, source=self)
TypeError: issubclass() arg 2 must be a class or tuple of classes
